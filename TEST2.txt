CODE SEGMENT
ASSUME CS:CODE,DS:CODE,SS:CODE,ES:CODE

IR EQU 00H
FLAGS EQU 02H
DR EQU 04H

ORG 1000H

MOV AX,0
MOV DS,AX
MOV SS,AX
MOV SP,540H

CALL ISBUSY
MOV AL,1
OUT IR,AL

CALL ISBUSY
MOV AL,080H
OUT IR,AL

MOV SI,OFFSET M1

PRINTM1:
MOV AH,[SI]
CMP AH ,0
JE NEXTLINE
CALL ISBUSY
CALL CHAROUT
INC SI
JMP PRINTM1

NEXTLINE:
MOV AL,0C0H
OUT IR,AL

MOV SI ,OFFSET M2

PRINTM2:
MOV AH,[SI]
CMP AH,0
JZ FINISH
CALL ISBUSY
CALL CHAROUT
INC SI
JMP PRINTM2

ISBUSY:
IN AL,FLAGS
AND AL,10000000B
JNZ ISBUSY
RET

CHAROUT:
MOV AL,AH
CALL ISBBUSY
OUT DR,AL
RET

M1 DB 'MIST',0
M2 DB 'CSE',0

FINISH:
HLT
CODE ENDS
END

