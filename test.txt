CODE SEGMENT
ASSUME CS:CODE,DS:CODE,ES:CODE,SS:CODE

IR EQU 00H
FLAGE EQU 02H
DR EQU 04H

ORG 1000H

MOV AX,0
MOV DS,AX
MOV SS,AX
MOV SP 540H

CALL ISBUSY
MOV AL,01H
OUT IR,AL

CALL ISBUSY
MOV AL,080H
OUT IR,AL

MOV SI OFFSET M1

PRINTM1:
MOV AH,[SI]
CMP AH,0
JE NEXTLINE
CALL ISBUSY
CHAROUT
INC SI
JMP PRINTM1

NEXTLINE:
ISBUSY
MOV AL,0C0H
OUT IR,AL

MOV SI OFFSET M2

PRINTM2:
MOV AH,[SI]
CMP AH,0
JE FINISH
CALL ISBUSY
CHAROUT
JMP PRINTM2

ISBUSY:
IN AL,FLAG
AND AL,10000000B
JNZ ISBUSY
RET

CHAROUT:
CALL ISBUSY
MOV AL,AH
OUT DR,AL
RET

M1 DB 'MIST',0
M2 DB 'CSE',0

CODE ENDS
END